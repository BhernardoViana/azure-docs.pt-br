---
title: Avaliação de Vulnerabilidade do SQL – Banco de Dados SQL do Azure | Microsoft Docs
description: Saiba como configurar a Avaliação de Vulnerabilidade do SQL no Banco de Dados SQL e interpretar os relatórios de avaliação.
services: sql-database
ms.service: sql-database
ms.subservice: security
ms.custom: ''
ms.devlang: ''
ms.topic: conceptual
author: ronitr
ms.author: ronitr
ms.reviewer: vanto, carlrab
manager: craigg
ms.date: 01/29/2019
ms.openlocfilehash: 6be51c63cbfbd422d384afaac3ef3af2e023bbbc
ms.sourcegitcommit: 698a3d3c7e0cc48f784a7e8f081928888712f34b
ms.translationtype: HT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/31/2019
ms.locfileid: "55452882"
---
# <a name="sql-vulnerability-assessment-service-helps-you-identify-database-vulnerabilities"></a>O serviço de Avaliação de Vulnerabilidades do SQL ajuda a identificar vulnerabilidades de banco de dados

A Avaliação de Vulnerabilidade do SQL é um serviço fácil de ser configurado que pode descobrir, acompanhar e ajudá-lo a corrigir vulnerabilidades potenciais do banco de dados. Use-a para melhorar proativamente a segurança de seu banco de dados.

A Avaliação de Vulnerabilidade faz parte da oferta da [ADS (Segurança de Dados Avançada) do SQL](sql-advanced-threat-protection.md), um pacote unificado para funcionalidades avançadas de segurança do SQL. A Avaliação de Vulnerabilidade pode ser acessada e gerenciada por meio do portal central da ADS do SQL.

 [!NOTE]
> A Avaliação de Vulnerabilidade é compatível com o Banco de Dados SQL do Azure, a Instância Gerenciada do SQL do Azure e o SQL Data Warehouse do Azure. Para simplificar, o Banco de Dados SQL é usado neste artigo para se referir a qualquer um desses serviços de banco de dados gerenciado.

## <a name="the-vulnerability-assessment-service"></a>O serviço de Avaliação de Vulnerabilidades

A Avaliação de vulnerabilidade de SQL (VA) é um serviço que fornece visibilidade sobre o estado de segurança e inclui etapas acionáveis para resolver problemas de segurança e aperfeiçoar a segurança de banco de dados. Ela pode ajudá-lo a:  

- Atender aos requisitos de conformidade que exigem relatórios de verificação de banco de dados.  
- Atender a padrões de privacidade de dados.  
- Monitorar um ambiente de banco de dados dinâmico, no qual as alterações são difíceis de rastrear.  

Avaliação de Vulnerabilidades é um serviço de verificação incorporado ao serviço Banco de Dados SQL do Azure. O serviço emprega uma base de dados de conhecimento de regras sinaliza vulnerabilidades de segurança e destaca desvios das práticas recomendadas, como configurações incorretas, excesso de permissões e dados confidenciais sem proteção. As regras se baseiam nas melhores práticas da Microsoft e enfocam os problemas de segurança que apresentam os maiores riscos para o banco de dados e seus dados importantes. Elas abordam problemas no nível do banco de dados, bem como problemas de segurança no nível do servidor, como configurações de firewall do servidor e permissões no nível do servidor. Essas regras também podem representar muitos dos requisitos de várias agências reguladoras para atender aos seus padrões de conformidade.  

Resultados da varredura incluem etapas acionáveis para resolver cada problema e fornecer os scripts personalizados de correção onde aplicável. Um relatório de avaliação pode ser personalizado para seu ambiente com a definição de uma linha de base aceitável para configurações de permissão, configurações de recurso e configurações de banco de dados.

## <a name="implementing-vulnerability-assessment"></a>Implementar a Avaliação de Vulnerabilidades

As etapas a seguir implementam a VA no Banco de dados SQL do Microsoft Azure.  

### <a name="1-run-a-scan"></a>1. Executar uma verificação  

Comece a usar a VA navegando para **Segurança de Dados Avançada** no cabeçalho Segurança do painel do Banco de Dados SQL do Azure. Clique para habilitar a Segurança de Dados Avançada e clique no cartão **Selecionar Armazenamento** ou no cartão **Avaliação de Vulnerabilidade**, que automaticamente abre o cartão de configurações da Avaliação de Vulnerabilidade para todo o SQL Server.

Comece configurando uma conta de armazenamento na qual os resultados da verificação de todos os bancos de dados no servidor serão armazenados. Para saber mais sobre as contas de armazenamento, confira [Sobre as contas de armazenamento do Azure](../storage/common/storage-create-storage-account.md). Depois que o armazenamento é configurado, clique em **Verificar** para verificar seu banco de dados quanto a vulnerabilidades.
  
![Examinar um banco de dados](./media/sql-vulnerability-assessment/pp_va_initialize.png)  

  > [!NOTE]
  > A verificação é simples e segura. Ela levará alguns segundos para ser executada e é completamente somente leitura. Ela não fará alterações em seu banco de dados.  

### <a name="2-view-the-report"></a>2. Exibir o relatório

Quando a verificação estiver concluída, o relatório de verificação será automaticamente exibido no portal do Azure. O relatório apresenta uma visão geral do estado de segurança: quantos problemas foram encontrados e suas respectivas severidades. Os resultados incluem avisos sobre desvios das melhores práticas e um instantâneo das configurações relacionadas à segurança, como funções e entidades de segurança de banco de dados e suas permissões associadas. O relatório de verificação também fornece um mapa dos dados confidenciais descobertos no banco de dados e inclui recomendações para classificar esses dados usando a [Descoberta e Classificação de Dados](sql-database-data-discovery-and-classification.md).

![Exibir o relatório](./media/sql-vulnerability-assessment/pp_main_getstarted.png)  

### <a name="3-analyze-the-results-and-resolve-issues"></a>3. Analisar os resultados e resolver problemas

Examine os resultados e determine quais conclusões no relatório são problemas de segurança reais em seu ambiente. Faça uma busca detalhada de cada resultado com falha para entender o impacto da conclusão e o motivo da falha de cada verificação de segurança. Use as informações de correção acionáveis fornecidas pelo relatório para resolver o problema.  

![Analisar o relatório](./media/sql-vulnerability-assessment/pp_fail_rule_show_remediation.png)

### <a name="4-set-your-baseline"></a>4. Definir a linha de base

Ao examinar os resultados da avaliação, marque resultados específicos como sendo uma *Linha de base* aceitável em seu ambiente. A linha de base é essencialmente uma personalização de como os resultados são relatados. Os resultados que correspondem à linha de base são considerados como aprovados nas verificações posteriores. Depois de estabelecer o estado de segurança de linha de base, o VA relata somente os desvios da linha de base e você pode concentrar sua atenção nos problemas relevantes.  

![Definir a linha de base](./media/sql-vulnerability-assessment/pp_fail_rule_show_baseline.png)  

### <a name="5-run-a-new-scan-to-see-your-customized-tracking-report"></a>5. Executar uma nova verificação para ver o relatório de acompanhamento personalizado

Depois de concluir a configuração das **Linhas de Base da Regra**, execute uma nova verificação para exibir o relatório personalizado. A VA agora relata apenas os problemas de segurança que sejam diferentes do seu estado de linha de base aprovado.

![Exibir o relatório personalizado](./media/sql-vulnerability-assessment/pp_pass_main_with_baselines.png)  

A Avaliação de Vulnerabilidades agora pode ser usada para monitorar se o banco de dados mantém um alto nível de segurança em todos os momentos e se as políticas organizacionais são atendidas. Se os relatórios de conformidade forem necessários, os relatórios de VA poderão ser úteis para facilitar o processo de conformidade.  

### <a name="6-set-up-periodic-recurring-scans"></a>6. Configurar verificações recorrentes periódicas

Navegue para as configurações da Avaliação de Vulnerabilidade para ativar **Verificações recorrentes periódicas**. Isso configura a Avaliação de Vulnerabilidade para executar automaticamente uma verificação no banco de dados uma vez por semana. Um resumo dos resultados da verificação será enviado aos endereços de email fornecidos.

![Exibir o relatório personalizado](./media/sql-vulnerability-assessment/pp_recurring_scans.png)

### <a name="7-export-an-assessment-report"></a>7. Exportar um relatório de avaliação

Clique em **Exportar Resultados da Verificação** para criar um relatório do Excel para download do resultado da verificação. Esse relatório contém uma guia de resumo que exibe um resumo da avaliação, incluindo todas as verificações com falha. Também inclui uma guia **Resultados** que contém o conjunto completo dos resultados da verificação, incluindo todas as verificações que foram executadas e os detalhes do resultado de cada uma.

### <a name="8-view-scan-history"></a>8. Exibir o histórico de verificação

Clique em **Histórico de Verificação** no painel do VA para exibir um histórico de todas as verificações executadas anteriormente nesse banco de dados. Selecione uma verificação específica na lista para exibir os resultados detalhados dessa verificação.

A Avaliação de Vulnerabilidades agora pode ser usada para monitorar se o banco de dados mantém um alto nível de segurança em todos os momentos e se as políticas organizacionais são atendidas. Se os relatórios de conformidade forem necessários, os relatórios de VA poderão ser úteis para facilitar o processo de conformidade.

## <a name="manage-vulnerability-assessments-using-azure-powershell"></a>Gerenciar Avaliações de Vulnerabilidade usando o Azure PowerShell

Você pode usar os cmdlets do Microsoft Azure PowerShell para gerenciar suas avaliações de vulnerabilidade de forma programática. Os cmdlets com suporte são:

- [Update-AzureRmSqlDatabaseVulnerabilityAssessmentSettings](https://docs.microsoft.com/powershell/module/azurerm.sql/Update-AzureRmSqlDatabaseVulnerabilityAssessmentSettings?view=azurermps-6.6.0)

  Atualiza as configurações de avaliação de vulnerabilidades de um banco de dados
- [Get-AzureRmSqlDatabaseVulnerabilityAssessmentSettings](https://docs.microsoft.com/powershell/module/azurerm.sql/Get-AzureRmSqlDatabaseVulnerabilityAssessmentSettings?view=azurermps-6.6.0)

  Retorna as configurações de avaliação de vulnerabilidades de um banco de dados
- [Clear-AzureRmSqlDatabaseVulnerabilityAssessmentSettings](https://docs.microsoft.com/powershell/module/azurerm.sql/Clear-AzureRmSqlDatabaseVulnerabilityAssessmentSettings?view=azurermps-6.6.0)

  Limpa as configurações de avaliação de vulnerabilidades de um banco de dados
- [Set-AzureRmSqlDatabaseVulnerabilityAssessmentRuleBaseline](https://docs.microsoft.com/powershell/module/azurerm.sql/Set-AzureRmSqlDatabaseVulnerabilityAssessmentRuleBaseline?view=azurermps-6.6.0)

  Define a linha de base da regra de avaliação de vulnerabilidades.
- [Get-AzureRmSqlDatabaseVulnerabilityAssessmentRuleBaseline](https://docs.microsoft.com/powershell/module/azurerm.sql/Get-AzureRmSqlDatabaseVulnerabilityAssessmentRuleBaseline?view=azurermps-6.6.0)

  Obtém a linha de base da regra de avaliação de vulnerabilidades para uma determinada regra.
- [Clear-AzureRmSqlDatabaseVulnerabilityAssessmentRuleBaseline](https://docs.microsoft.com/powershell/module/azurerm.sql/Clear-AzureRmSqlDatabaseVulnerabilityAssessmentRuleBaseline?view=azurermps-6.6.0)

  Limpa a linha de base da regra de avaliação de vulnerabilidades. Primeiro, defina a linha de base antes de usar este cmdlet para limpá-lo.
- [Start-AzureRmSqlDatabaseVulnerabilityAssessmentScan](https://docs.microsoft.com/powershell/module/azurerm.sql/Start-AzureRmSqlDatabaseVulnerabilityAssessmentScan?view=azurermps-6.6.0)

  Dispara o início de uma verificação de avaliação de vulnerabilidades
- [Get-AzureRmSqlDatabaseVulnerabilityAssessmentScanRecord](https://docs.microsoft.com/powershell/module/azurerm.sql/Get-AzureRmSqlDatabaseVulnerabilityAssessmentScanRecord?view=azurermps-6.6.0)

   Obtém todos os registros de verificação de avaliação de vulnerabilidade associados a um determinado banco de dados.
- [Convert-AzureRmSqlDatabaseVulnerabilityAssessmentScan](https://docs.microsoft.com/powershell/module/azurerm.sql/Convert-AzureRmSqlDatabaseVulnerabilityAssessmentScan?view=azurermps-6.6.0)

  Converte resultados de verificação de avaliação de vulnerabilidades em um arquivo do Excel

Para obter um exemplo de script, consulte [suporte do PowerShell de Avaliação de Vulnerabilidade de SQL do Azure](https://blogs.msdn.microsoft.com/sqlsecurity/2018/08/02/azure-sql-vulnerability-assessment-now-with-powershell-support/).

## <a name="next-steps"></a>Próximas etapas  

- Saiba mais sobre a [Segurança de dados avançada do SQL](sql-advanced-threat-protection.md)
- Saiba mais sobre [Descoberta e Classificação de Dados](sql-database-data-discovery-and-classification.md)
